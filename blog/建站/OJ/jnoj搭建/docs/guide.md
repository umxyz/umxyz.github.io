JNOJ 管理员使用指南
=================

## 在线测评系统整体架构

前台页面从数据库获取题目、比赛列表在浏览器上显示，用户通过浏览器提交的代码直接保存到数据库。
评测程序负责从数据库中取出用户刚刚提交的代码，保存到文件，然后编译，执行，评判，最后将评判结果写回数据库。

JNOJ 分为三部分：`web`，`judge`, `polygon`。

### web

是指网页前端，即用户打开浏览器访问看到的。

目前是用PHP语言、Yii 2框架编写。WEB 程序的入口目录在 web 目录下，

### judge

评测程序就是对用户提交的代码进行编译，执行，将执行结果和OJ后台正确的测试数据进行比较，如果答案和后台数据完全相同就是 Accepted，
也就是你的程序是正确的。否则返回错误信息。 测评程序会不断扫描数据库，一旦出现没有评判的题目会立即进行评判。

同时，为了防止用户提交恶意代码破坏系统，测评程序会对所提交程序调用的函数及程序运行权限进行限制。

目前是用C语言，基于hustoj编写。

测评机在 `judge` 目录下，后台数据文件在 `judge/data` 目录下，一道题目对应一个文件夹。以 `in` 作为后缀名的用于作测试的输入文件，
以 `out` 作为后缀名的用于作测试的输出文件。

### polygon

这是用于方便在线出题、出数据、验题，类似于 Codeforces 的 Polygon System 出题系统。任何用户都可以在上面出题，
只能看到自己编写的题目，但管理员可以看到所有人出的题目。管理员可以将 Polygon 中的题目导入题库列表中。

Polygon 的出数据、验题功能也是在 judge 的基础上改写而成。

polygon 在 `polygon` 目录下，后台数据文件在 `polygon/data` 目录下，一道题目对应一个文件夹。以 `in` 作为后缀名的用于作测试的输入文件，
以 `out` 作为后缀名的用于作测试的输出文件。

## FAQ.

1. `作业` 与 `比赛` 的区别：

    两者区别只是权限。作业任何用户都可以创建，比赛只能由管理员账户在后台创建。

2. 线下赛与线上赛的区别：

    线下赛有额外的功能：
        1. 代码打印功能
        2. 滚榜功能
        3. 批量生成比赛用户（对这些批量生成的用户会限制修改个人信息）
        4. 非正式参赛用户不参与排名
        5. 限制参加比赛的用户（要参加比赛只能在后台由管理员添加）

3. 如何为线下赛批量生成比赛用户

    在后台比赛详情页面，有一个`参赛用户`链接，点击该链接进入参赛用户管理页面，即可看到 `为比赛批量生成用户` 的功能。
    
    同时还可以看到 `Add User` 功能，使用 `Add User` 功能，需要自行在前台注册账户，并且所添加的参赛用户不会参与比赛排名。

4. 如何修改用户密码
    
    如果可以登录，个人资料页面可以修改；如果忘记密码不能登录，目前只能由管理员在后台 `用户` 管理功能，找到对应用户，
    点击编辑功能来修改。